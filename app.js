const questions1 = [
    {
        image: 'pic/1.JPG',
        options: ['Digital', 'Analog', 'Calculate', 'Numerical'],
        answer: 'Digital'
    },
    {
        image: 'pic/2.JPG',
        options: ['อ่านข่าว','เล่นเกม','สั่งซื้อสินค้า','ทุกข้อ'],
        answer: 'ทุกข้อ'
    },
    {
        image: 'pic/3.JPG',
        options: ['Computare', 'Electronic', ' lnstruction', 'Program'],
        answer: 'Program'
    },
    {
        image: 'pic/4.JPG',
        options: ['Dos', 'Paint', 'Note Pad', 'Scandisk'],
        answer: 'Paint'
    },
    {
        image: 'pic/5.JPG',
        options: ['จอภาพ', 'คีย์บอร์ด', 'เครื่องพิมพ์', 'เคส'],
        answer: 'คีย์บอร์ด'
    },
    {
        image: 'pic/6.JPG',
        options: ['Delete', 'Rename', 'Open', 'Save'],
        answer: 'Open'
    },
    {
        image: 'pic/7.JPG',
        options: ['Save', 'Rename', 'Open', 'Delete'],
        answer: 'Save'
    },
    {
        image: 'pic/8.JPG',
        options: ['อินเตอร์เน็ต', 'อินเทอร์เน็ต', 'อินเตอเนต', 'อินเทอเนต'],
        answer: 'อินเทอร์เน็ต'
    },
    {
        image: 'pic/9.JPG',
        options: ['World Wide Web', 'World War Web', 'World Wan Web', 'World Wide Wan'],
        answer: 'World Wide Web'
    },
    {
        image: 'pic/10.JPG',
        options: ['เสียงไม่แตก', 'ลิขสิทธิ์', 'ความละเอียดของภาพ', 'ตัวหนังสือต้องคมชัด'],
        answer: 'ลิขสิทธิ์'
    }
];

const questions2 = [
    {
        image: 'pic/11.JPG',
        options: ['อาร์ดูโน', 'คิดไบรท์', 'สแครช', 'แคนวา'],
        answer: 'คิดไบรท์'
    },
    {
        image: 'pic/12.JPG',
        options: ['สายไฟ', 'กล่อง Wifi', 'เครือข่ายคอมพิวเตอร์', 'ปลั๊กไฟ'],
        answer: 'เครือข่ายคอมพิวเตอร์'
    },
    {
        image: 'pic/13.JPG',
        options: ['16 สี', '256 สี', '∞', '16.7 ล้านสี'],
        answer: '16.7 ล้านสี'
    },
    {
        image: 'pic/14.JPG',
        options: ['สหรัฐอเมริกา', 'ไทย', 'วัดอ้อมน้อย', 'อังกฤษ'],
        answer: 'สหรัฐอเมริกา'
    },
    {
        image: 'pic/15.JPG',
        options: ['เฟสบุ๊ค', 'ซีพียู', 'โรบล็อก', 'กูเกิลแม็พ'],
        answer: 'ซีพียู'
    },
    {
        image: 'pic/16.JPG',
        options: ['เมาส์', 'คีย์บอร์ด', 'อินสตาแกรม', 'โทรศัพท์'],
        answer: 'อินสตาแกรม'
    },
    {
        image: 'pic/17.JPG',
        options: ['ประเทศไทย', 'สหรัฐอเมริกา', 'มาร์ก ซักเคอร์เบิร์ก', 'ผมเอง'],
        answer: 'มาร์ก ซักเคอร์เบิร์ก'
    },
    {
        image: 'pic/18.JPG',
        options: ['ถอดปลั๊กไฟ', 'กดปุ่ม Power', 'กดปุ่ม Shut down', 'สับคัทเอาท์บ้าน'],
        answer: 'กดปุ่ม Shut down'
    },
    {
        image: 'pic/19.JPG',
        options: ['ซีพียู', 'เคส', 'การ์ดจอ', 'แรม'],
        answer: 'เคส'
    },
    {
        image: 'pic/20.JPG',
        options: ['ภาษาอังกฤษ', 'ภาษาไพธอน', 'ภาษาไคโด', 'ภาษาโพไซดอน'],
        answer: 'ภาษาไพธอน'
    }
];

const questions3 = [
    {
        image: 'pic/21.JPG',
        options: ['นายกคนที่ 11', 'จุฬาลงกรณ์มหาวิทยาลัย', 'หม่อมหลวงขวัญทิพย์', 'SAMSUNG'],
        answer: 'จุฬาลงกรณ์มหาวิทยาลัย'
    },
    {
        image: 'pic/22.JPG',
        options: ['Projector', 'Scanner', '3D Printer', 'Monitor'],
        answer: 'Scanner'
    },
    {
        image: 'pic/23.JPG',
        options: ['C','Java','Python','PHP','C#','Rust'],
        answer: 'Python'
    },
    {
        image: 'pic/24.JPG',
        options: ['Boolean', 'Integer', 'String', 'Float','Array'],
        answer: 'String'
    },
    {
        image: 'pic/25.JPG',
        options: ['ราคาสินค้า', 'เบอร์มือถือ', 'บ้านเลขที่', 'รหัสผ่าน'],
        answer: 'ราคาสินค้า'
    },
    {
        image: 'pic/26.JPG',
        options: ['1-2 ปี', '2-3 ปี', '3-4 ปี', '4-5 ปี','5-6 ปี'],
        answer: '2-3 ปี'
    },
    {
        image: 'pic/27.JPG',
        options: ['FTP', 'HTTP', 'HTTPS', 'TCP'],
        answer: 'HTTPS'
    },
    {
        image: 'pic/28.JPG',
        options: ['Google', 'Microsoft', 'Amazon', 'Oracle','Tesla'],
        answer: 'Google'
    },
    {
        image: 'pic/29.JPG',
        options: ['DRAM', 'SRAM', 'ROM', 'Cache','RAM'],
        answer: 'ROM'
    },
    {
        image: 'pic/30.JPG',
        options: ['C', 'Java', 'Rust', 'Assembly','R','SQL'],
        answer: 'Assembly'
    },
    
];

let currentQuestionIndex = 0;
let score = 0;
let currentQuestions = questions1;

// จับเวลา
let timer;
const timeLimit = 15;
let timeLeft = timeLimit;

function startTimer() {
    if (timer) clearInterval(timer);
    timeLeft = timeLimit;
    document.getElementById('timer').textContent = `${timeLeft}`;

    timer = setInterval(function() {
        timeLeft--;
        document.getElementById('timer').textContent = `${timeLeft}`;

        if (timeLeft <= 0) {
            clearInterval(timer);
            resetQuiz();
        }
    }, 1000);
}

function resetQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    showQuestion();
}

function showQuestion() {
    const questionContainer = document.getElementById('question-container');
    const question = currentQuestions[currentQuestionIndex];
    questionContainer.innerHTML = `
        <div id="timer" class="text-end text-3xl text-red-600">${timeLeft}</div>
        <img src="${question.image}" alt="question" class="mx-auto">
        <div class="flex justify-center space-x-4 mt-4">
            ${question.options.map(option => `<button class="answer-btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">${option}</button>`).join('')}
        </div>
    `;

    startTimer();
}

document.querySelectorAll('.question-set-btn').forEach(button => {
    button.addEventListener('click', function () {
        const level = this.getAttribute('data-set');
        if (level === '1') {
            currentQuestions = questions1;
        } else if (level === '2') {
            currentQuestions = questions2;
        } else if (level === '3') {
            currentQuestions = questions3;
        }
        currentQuestionIndex = 0;
        score = 0;
        showQuestion();
        document.getElementById('score-container').classList.add('hidden');
    });
});

document.getElementById('next-button').addEventListener('click', () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < currentQuestions.length) {
        showQuestion();
    } else {
        showScore();
    }
});

document.addEventListener('click', (event) => {
    if (event.target.classList.contains('answer-btn')) {
        const selectedAnswer = event.target.textContent;
        const correctAnswer = currentQuestions[currentQuestionIndex].answer;
        
        if (selectedAnswer === correctAnswer) {
            score++;
        }

        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuestions.length) {
            showQuestion();
        } else {
            showScore();
        }
    }
});

function showScore() {
    const questionContainer = document.getElementById('question-container');
    questionContainer.innerHTML = '';

    const scoreContainer = document.getElementById('score-container');
    scoreContainer.innerHTML = `
        <div class="score-box bg-white shadow-lg rounded-lg p-4 text-center animate-firework">
            <h2 class="text-2xl font-bold text-green-600 mb-2">สรุปคะแนน</h2>
            <p class="text-xl">คุณได้ <span class="font-bold text-blue-500">${score}</span> คะแนน</p>
            <button id="restart-button" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                เริ่มใหม่
            </button>
        </div>
    `;
    scoreContainer.classList.remove('hidden');
    
    document.getElementById('restart-button').addEventListener('click', () => {
        currentQuestionIndex = 0;
        score = 0;
        scoreContainer.classList.add('hidden');
        showQuestion();
    });
}

// เพลง
const musicToggleBtn = document.getElementById('music-toggle-btn');
const backgroundMusic = document.getElementById('background-music');

let isPlaying = false;

musicToggleBtn.addEventListener('click', () => {
    if (isPlaying) {
        backgroundMusic.pause();
        musicToggleBtn.textContent = '▶';
    } else {
        backgroundMusic.play();
        musicToggleBtn.textContent = '||';
    }
    isPlaying = !isPlaying;
});

// ระดับเสียง
window.onload = function() {
    const music = document.getElementById("background-music");
    music.volume = 0.1;
}

showQuestion();